IF(PACKAGE_ON_INSTALL)
IF(WIN32)
  SET(APPS "\${CMAKE_INSTALL_PREFIX}/bin/ASAP.exe")
  SET(APPS_DEBUG "\${CMAKE_INSTALL_PREFIX}/bin/ASAP_d.exe")
  SET(LIBS "\${CMAKE_INSTALL_PREFIX}/bin/libEGL.dll" "\${CMAKE_INSTALL_PREFIX}/bin/Qt5OpenGL.dll" "\${CMAKE_INSTALL_PREFIX}/bin/plugins/filters/NucleiDetectionFilterPlugin.dll")
  SET(LIBS_DEBUG "\${CMAKE_INSTALL_PREFIX}/bin/libEGLd.dll" "\${CMAKE_INSTALL_PREFIX}/bin/Qt5OpenGLd.dll" "\${CMAKE_INSTALL_PREFIX}/bin/plugins/filters/NucleiDetectionFilterPlugin_d.dll")
  SET(DIRS ${Qt5_DIR}/../../../bin ${OpenCV_LIB_DIR_OPT}/../bin ${OPENSLIDE_INCLUDE_DIR}/../../bin ${PugiXML_INCLUDE_DIR}/../bin ${UNITTEST_INCLUDE_DIR}/../bin ${Boost_LIBRARY_DIR})
  INCLUDE(InstallRequiredSystemLibraries)
  INSTALL(FILES ${Qt5_DIR}/../../../plugins/platforms/qwindows.dll DESTINATION bin/platforms CONFIGURATIONS Release)
  INSTALL(FILES ${Qt5_DIR}/../../../plugins/platforms/qwindowsd.dll DESTINATION bin/platforms CONFIGURATIONS Debug)
  IF(EXISTS ${Qt5_DIR}/../../../bin/libEGL.dll)
      INSTALL(FILES ${Qt5_DIR}/../../../bin/libEGL.dll DESTINATION bin CONFIGURATIONS Release)
  ENDIF(EXISTS ${Qt5_DIR}/../../../bin/libEGL.dll)
  IF(EXISTS ${Qt5_DIR}/../../../bin/libEGLd.dll)
      INSTALL(FILES ${Qt5_DIR}/../../../bin/libEGLd.dll DESTINATION bin CONFIGURATIONS Debug)
  ENDIF(EXISTS ${Qt5_DIR}/../../../bin/libEGLd.dll)  
  FILE(GLOB D3D_LIB ${Qt5_DIR}/../../../bin/d3dcompiler_*.dll)
  INSTALL(FILES ${D3D_LIB} DESTINATION bin)
  INSTALL(FILES ${Qt5_DIR}/../../../bin/Qt5OpenGL.dll DESTINATION bin CONFIGURATIONS Release)
  INSTALL(FILES ${Qt5_DIR}/../../../bin/Qt5OpenGLd.dll DESTINATION bin CONFIGURATIONS Debug)
  INSTALL(CODE "
   include(BundleUtilities)
   if(\"\${CMAKE_INSTALL_CONFIG_NAME}\" STREQUAL \"Debug\")
   fixup_bundle(\"${APPS_DEBUG}\"   \"${LIBS_DEBUG}\"   \"${DIRS}\")
   else()
   fixup_bundle(\"${APPS}\"   \"${LIBS}\"   \"${DIRS}\")
   endif()
   ")  
ENDIF(WIN32)
ENDIF(PACKAGE_ON_INSTALL)
